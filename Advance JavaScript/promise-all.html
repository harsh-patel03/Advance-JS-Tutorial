<!DOCTYPE html>
<html lang="en">
<head>
    <title>Advance JS</title>
    <script>
        /*
        let p1 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The First promise has resolved');
                resolve(10);
            }, 1 * 1000);
        });

        let p2 = new Promise((resolve, reject) => {
            setTimeout(() => {
                // console.log('The Second promise has resolved');
                // resolve(20);
                console.log('The Second promise has failed');
                reject("Failed");
            }, 2 * 1000);
        });

        let p3 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The Third promise has resolved');
                resolve(30);
            }, 3 * 1000);
        });

        var total = 0;
        Promise.all([p1, p2, p3]).then((result) => {

            for(var i in result){ total += result [i]}

            console.log(`Results : ${result}`);
            console.log(`total : ${total}`);

        }).catch((error) => {
            console.log(`Error : ${error}`);
        });
        */



        let promiseCall = function(returnData, message) {
            return function(resolve, reject){
            setTimeout(() => {
                console.log(`The ${message} promise has resolved`);
                resolve(returnData);
            }, returnData * 100);
        }
        };

        let p1 = new Promise(promiseCall(10,"first"));
        let p2 = new Promise(promiseCall(20,"second"));
        let p3 = new Promise(promiseCall(30,"third"));
        let p4 = new promise(function(resolve, reject){
            reject("The 4th Promise has rejected.");
        });

        var total = 0;
        Promise.all([p1, p2, p3, p4]).then((result) => {

            for(var i in result){ total += result [i]}

            console.log(`Results : ${result}`);
            console.log(`total : ${total}`);

        }).catch((error) => {
            console.log(`Error : ${error}`);
        });

    </script>
</head>
<body>
    
</body>
</html>